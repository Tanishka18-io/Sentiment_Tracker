<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <title>Sentiment Tracker</title>

  <!-- Bootstrap -->
  <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css" rel="stylesheet">
  <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>

  <style>
    body {
      background: linear-gradient(to bottom right, #5A827E, #84AE92, #B9D4AA, #FAFFCA);
      background-size: 400% 400%;
      animation: gradientMove 15s ease infinite;
      font-family: 'Segoe UI', sans-serif;
      color: #222;
    }

    @keyframes gradientMove {
      0% { background-position: 0% 50%; }
      50% { background-position: 100% 50%; }
      100% { background-position: 0% 50%; }
    }

    .hero {
      text-align: center;
      padding: 60px 20px;
      color: #fff;
      text-shadow: 0 2px 4px rgba(0,0,0,0.2);
    }

    .glass-card {
      background: rgba(255, 255, 255, 0.85);
      border-radius: 16px;
      padding: 30px;
      box-shadow: 0 12px 30px rgba(0,0,0,0.1);
      backdrop-filter: blur(5px);
      transition: 0.3s ease;
    }

    .glass-card:hover {
      transform: translateY(-5px);
      box-shadow: 0 16px 40px rgba(0,0,0,0.2);
    }

    .form-control:focus {
      border-color: #5A827E;
      box-shadow: 0 0 0 0.2rem rgba(90,130,126,0.25);
    }

    .btn-primary {
      background-color: #5A827E;
      border-color: #5A827E;
    }

    .btn-primary:hover {
      background-color: #476e6a;
      border-color: #476e6a;
    }

    .chart-container canvas {
      width: 100% !important;
      max-width: 250px;
      margin: auto;
    }

    .tweet-list {
      max-height: 300px;
      overflow-y: auto;
      background: rgba(255,255,255,0.6);
      padding: 10px;
      border-radius: 8px;
    }

    .tweet-item {
      border-bottom: 1px solid #ccc;
      padding: 5px 0;
    }

    .tweet-item:last-child {
      border-bottom: none;
    }
  </style>
</head>

<body>

  <!-- Hero Header -->
  <section class="hero">
    <h1 class="display-5 fw-bold">ðŸ’¬ AI Sentiment Tracker</h1>
    <p class="lead">Analyze tweets or your own sentences for sentiment â€” lightning fast âš¡</p>
  </section>

  <!-- Main Container -->
  <div class="container my-5">
    <div class="row g-4">

      <!-- Column 1: Sentence Input -->
      <div class="col-md-6">
        <div class="glass-card">
          <h4>ðŸŽ¯ Sentence Sentiment</h4>
          <form method="POST" class="mb-3">
            <input type="text" name="sentence" class="form-control mb-3" placeholder="Type your sentence here..." required>
            <button type="submit" class="btn btn-primary w-100">Predict Sentiment</button>
          </form>

          {% if user_sentence %}
            <div class="alert alert-info">
              Sentiment of "<strong>{{ user_sentence }}</strong>" is:
              <span class="fw-bold text-primary">{{ user_sentiment }}</span>
            </div>
          {% endif %}
        </div>
      </div>

      <!-- Column 2: Keyword Tweets + Chart -->
      <div class="col-md-6">
        <div class="glass-card">
          <h4>ðŸ“Œ Analyze using keywords</h4>
          <form method="POST" class="mb-3">
            <input type="text" name="keyword" class="form-control mb-3" placeholder="Enter keyword for tweets..." required>
            <button type="submit" class="btn btn-primary w-100">Analyze</button>
          </form>

          {% if keyword %}
            <p><strong>Results for:</strong> <em>{{ keyword }}</em></p>

            {% if sentiments %}
              <div class="text-center">
                <canvas id="sentimentChart"></canvas>
              </div>

              <script>
                const data = {
                  labels: ['Positive', 'Negative', 'Neutral'],
                  datasets: [{
                    data: [{{ counts['Positive'] }}, {{ counts['Negative'] }}, {{ counts['Neutral'] }}],
                    backgroundColor: ['#4CAF50', '#F44336', '#FFC107'],
                    hoverOffset: 20,
                    borderWidth: 1,
                    borderColor: '#fff'
                  }]
                };

                const config = {
                  type: 'doughnut',
                  data: data,
                  options: {
                    responsive: true,
                    animation: {
                      animateScale: true,
                      animateRotate: true
                    },
                    plugins: {
                      legend: {
                        position: 'bottom'
                      }
                    }
                  }
                };

                new Chart(document.getElementById('sentimentChart'), config);
              </script>

              <div class="tweet-list mt-3">
                {% for tweet, sentiment in sentiments %}
                  <div class="tweet-item">
                    <strong>{{ sentiment }}</strong>: {{ tweet }}
                  </div>
                {% endfor %}
              </div>
            {% else %}
              <p class="text-muted">No tweets found or quota limit reached.</p>
            {% endif %}
          {% endif %}
        </div>
      </div>
    </div>
  </div>

</body>
</html>
