<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <title>Sentiment Tracker</title>
  <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css" rel="stylesheet">
  <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
  <style>
    body {
      background: linear-gradient(to right, #f9f9f9, #e6f0ff);
      font-family: 'Segoe UI', sans-serif;
    }

    .fade-in {
      animation: fadeIn 1.2s ease-in-out;
    }

    @keyframes fadeIn {
      0% { opacity: 0; transform: translateY(20px); }
      100% { opacity: 1; transform: translateY(0); }
    }

    .card {
      transition: transform 0.3s ease;
    }

    .card:hover {
      transform: scale(1.01);
      box-shadow: 0 8px 20px rgba(0, 0, 0, 0.1);
    }

    canvas {
      max-width: 250px;
      margin: auto;
      display: block;
    }

    .chart-container {
      display: flex;
      justify-content: center;
      margin-top: 20px;
    }

    .badge {
      font-size: 0.9rem;
    }
  </style>
</head>
<body class="bg-light fade-in">

<div class="container py-5">
  <h1 class="text-center mb-5 text-primary fw-bold">ðŸ“Š Sentiment Tracker</h1>

  <!-- Tweet Analysis -->
  <div class="card shadow mb-5">
    <div class="card-body">
      <h4 class="card-title">Analyze Tweets from Keyword</h4>
      <form method="POST" class="row g-3 mt-2">
        <div class="col-md-10">
          <input type="text" class="form-control" name="keyword" placeholder="Enter keyword for tweets" required>
        </div>
        <div class="col-md-2 d-grid">
          <button type="submit" class="btn btn-primary">Analyze Tweets</button>
        </div>
      </form>

      {% if keyword %}
        <div class="mt-4">
          <h6>Results for: <em class="text-secondary">{{ keyword }}</em></h6>

          {% if sentiments %}
            <div class="chart-container">
              <canvas id="sentimentChart" width="250" height="250"></canvas>
            </div>
            <script>
              const data = {
                labels: ['Positive', 'Negative', 'Neutral'],
                datasets: [{
                  data: [{{ counts['Positive'] }}, {{ counts['Negative'] }}, {{ counts['Neutral'] }}],
                  backgroundColor: ['#4CAF50', '#F44336', '#FFC107'],
                }]
              };
              const config = { type: 'pie', data: data };
              new Chart(document.getElementById('sentimentChart'), config);
            </script>

            <ul class="list-group mt-4">
              {% for tweet, sentiment in sentiments %}
                <li class="list-group-item d-flex justify-content-between align-items-center">
                  {{ tweet }}
                  <span class="badge bg-info text-dark">{{ sentiment }}</span>
                </li>
              {% endfor %}
            </ul>
          {% else %}
            <p class="text-muted mt-3">No tweets found for this keyword.</p>
          {% endif %}
        </div>
      {% endif %}
    </div>
  </div>

  <!-- Custom Sentence Prediction -->
  <div class="card shadow fade-in">
    <div class="card-body">
      <h4 class="card-title">ðŸŽ¯ Predict Sentiment of Your Sentence</h4>
      <form method="POST" class="row g-3 mt-2">
        <div class="col-md-10">
          <input type="text" class="form-control" name="sentence" placeholder="Type your sentence here..." required>
        </div>
        <div class="col-md-2 d-grid">
          <button type="submit" class="btn btn-success">Check Sentiment</button>
        </div>
      </form>

      {% if user_sentence %}
        <div class="mt-4 alert alert-info shadow-sm">
          Sentiment of "<strong>{{ user_sentence }}</strong>": 
          <span class="fw-bold text-primary">{{ user_sentiment }}</span>
        </div>
      {% endif %}
    </div>
  </div>
</div>

</body>
</html>
