<!DOCTYPE html>
<html>
<head>
    <title>Twitter Sentiment Tracker</title>
</head>
<body>
    <h1>Twitter Sentiment Tracker</h1>

    <!-- 🔍 Analyze tweets from CSV -->
    <form method="POST">
        <input type="text" name="keyword" placeholder="Enter keyword for tweets" required>
        <input type="submit" value="Analyze Tweets">
    </form>

    {% if keyword %}
        <h2>Results for: <em>{{ keyword }}</em></h2>
        
        {% if sentiments %}
            <canvas id="sentimentChart" width="300" height="300"></canvas>
            <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
            <script>
                const data = {
                    labels: ['Positive', 'Negative', 'Neutral'],
                    datasets: [{
                        data: [{{ counts['Positive'] }}, {{ counts['Negative'] }}, {{ counts['Neutral'] }}],
                        backgroundColor: ['#4CAF50', '#F44336', '#FFC107'],
                    }]
                };

                const config = {
                    type: 'pie',
                    data: data,
                };

                new Chart(
                    document.getElementById('sentimentChart'),
                    config
                );
            </script>

            <ul>
                {% for tweet, sentiment in sentiments %}
                    <li><strong>{{ sentiment }}</strong>: {{ tweet }}</li>
                {% endfor %}
            </ul>
        {% else %}
            <p>No tweets found for "{{ keyword }}".</p>
        {% endif %}
    {% endif %}

    <hr>

    <!-- ✍️ New section: Predict sentiment from sentence -->
    <h2>Predict Sentiment of Your Own Sentence</h2>
    <form method="POST">
        <input type="text" name="sentence" placeholder="Type a sentence..." required>
        <input type="submit" value="Check Sentiment">
    </form>

    {% if user_sentence %}
        <h3>Sentiment of "<em>{{ user_sentence }}</em>": 
            <span style="color:blue">{{ user_sentiment }}</span>
        </h3>
    {% endif %}
</body>
</html>
